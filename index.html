<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>mySBSI - Dashboard Anggota</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Public+Sans:wght@400;700;900&display=swap');
        body { font-family: 'Public Sans', sans-serif; background: #f8fafc; }
        .page { display: none; min-height: 100vh; }
        .active { display: flex !important; flex-direction: column; }
        .menu-card { background: white; border-radius: 20px; padding: 20px; text-align: center; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); transition: 0.3s; cursor: pointer; border: 1px solid #f1f5f9; }
        .menu-card:active { transform: scale(0.95); background: #f1f5f9; }
        .menu-icon { font-size: 24px; margin-bottom: 10px; color: #00AEEF; }
        .menu-label { font-size: 11px; font-weight: 900; color: #334155; text-transform: uppercase; line-height: 1.2; }
    </style>
</head>
<body>

    <div id="page-login" class="page active !bg-[#002D57] items-center justify-center p-8">
        <img src="Logo My SBSI.png" class="w-64 mb-10">
        <div class="w-full max-w-sm space-y-4">
            <input type="text" id="nik" placeholder="NIK" class="w-full p-5 rounded-2xl font-bold outline-none">
            <input type="password" id="pass" placeholder="Password" class="w-full p-5 rounded-2xl font-bold outline-none">
            <button onclick="doLogin()" class="w-full p-5 bg-[#00AEEF] text-white rounded-2xl font-black">MASUK</button>
        </div>
    </div>

    <div id="page-dashboard" class="page">
        <div class="bg-[#002D57] p-8 pb-12 rounded-b-[40px] text-white relative">
            <div class="flex items-center gap-4">
                <img id="user-foto" src="" class="w-16 h-16 rounded-2xl border-2 border-[#00AEEF] object-cover">
                <div>
                    <h2 id="user-nama" class="font-black text-xl leading-tight">...</h2>
                    <p id="user-perusahaan" class="text-xs opacity-70 font-bold italic">...</p>
                </div>
            </div>
            <div class="absolute -bottom-6 left-0 right-0 px-8">
                <div class="bg-[#00AEEF] p-4 rounded-2xl shadow-lg flex justify-between items-center">
                    <span class="text-[10px] font-black italic">STATUS ANGGOTA: AKTIF</span>
                    <i class="fas fa-check-circle"></i>
                </div>
            </div>
        </div>

        <div class="p-8 mt-8 grid grid-cols-2 gap-4">
            <div class="menu-card" onclick="navigasi('page-dates')">
                <i class="fas fa-calculator menu-icon"></i>
                <div class="menu-label">Hitung Hak Pekerja</div>
            </div>
            <div class="menu-card" onclick="alert('Fitur Video Segera Hadir')">
                <i class="fas fa-play-circle menu-icon"></i>
                <div class="menu-label">Video SBSI</div>
            </div>
            <div class="menu-card" onclick="alert('Dasar Hukum Sedang Disusun')">
                <i class="fas fa-gavel menu-icon"></i>
                <div class="menu-label">Dasar Hukum</div>
            </div>
            <div class="menu-card" onclick="alert('Chat Menghubungkan ke Admin...')">
                <i class="fas fa-comments menu-icon"></i>
                <div class="menu-label">Chat Advokasi</div>
            </div>
        </div>
        
        <div class="px-8 mt-2">
            <button onclick="location.reload()" class="w-full p-4 bg-red-50 text-red-600 rounded-2xl font-black text-xs uppercase tracking-widest">Logout</button>
        </div>
    </div>

    <div id="page-dates" class="page">
        <div class="bg-[#002D57] p-6 text-white font-black italic">KALKULATOR HAK PHK</div>
        <div class="p-6 space-y-4 flex-1">
            <div class="bg-white p-6 rounded-3xl border">
                <label class="text-[10px] font-black text-gray-400 block mb-2 uppercase">Tanggal Masuk</label>
                <input type="date" id="tgl-masuk" class="w-full font-bold outline-none text-xl">
            </div>
            <div class="bg-white p-6 rounded-3xl border">
                <label class="text-[10px] font-black text-gray-400 block mb-2 uppercase">Tanggal PHK</label>
                <input type="date" id="tgl-phk" class="w-full font-bold outline-none text-xl">
            </div>
        </div>
        <div class="p-6 flex gap-3">
            <button onclick="navigasi('page-dashboard')" class="btn-nav btn-gray flex-1">Batal</button>
            <button onclick="initWizard()" class="btn-nav btn-blue flex-2 w-full font-black">Lanjut</button>
        </div>
    </div>

    <script>
        const URL_GAS = "https://script.google.com/macros/s/AKfycbwIxB6RS5SdJUklGgnVp3flOydU7UQb5bRkJ65kO5g4nsLNGLQ0F8dpAS3D2YJnnhj8/exec";
        let userLogin = {};

        async function doLogin() {
            const nik = document.getElementById('nik').value;
            const pass = document.getElementById('pass').value;
            const res = await fetch(`${URL_GAS}?action=login&nik=${nik}&pass=${pass}`).then(r => r.json());
            
            if(res.status === "success") {
                userLogin = res;
                document.getElementById('user-nama').innerText = res.nama;
                document.getElementById('user-foto').src = res.foto;
                document.getElementById('user-perusahaan').innerText = res.perusahaan;
                navigasi('page-dashboard');
                
                // Ambil UMP di background
                const u = await fetch(`${URL_GAS}?action=getUMP`).then(r => r.json());
                DB_UMP = u.data;
            } else {
                alert(res.message);
            }
        }

        function navigasi(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        // [SISA LOGIKA KALKULATOR SAMA SEPERTI "RESET BASIC"]
    </script>
</body>
</html>
